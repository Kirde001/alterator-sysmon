<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Инспектор Syscall</title>
    <script type="text/javascript" src="/alterator/js/prototype.js"></script>
    <script type="text/javascript" src="/alterator/js/alterator.js"></script>
    <script type="text/javascript" src="/alterator/js/alterator-ajax.js"></script>
    <style>
        body { font-family: sans-serif; margin: 2em; color: #333; }
        h1 { color: #1e5a9a; }
        pre { 
            background-color: #f8f9fa; 
            border: 1px solid #dee2e6; 
            border-radius: 4px;
            padding: 1em; 
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 60vh;
            overflow-y: auto;
        }
        button { 
            font-size: 1em; 
            padding: 0.5em 1em; 
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background-color: #0056b3; }
    </style>
</head>
<body>
    <h1>Инспектор системных вызовов</h1>
    <pre id="data-container">Загрузка данных...</pre>
    <button id="update-btn">Обновить</button>

    <script type="text/javascript">
        function updateData() {
            var container = $('data-container');
            container.textContent = 'Загрузка...';
            var backend = new AlteratorAjax();
            backend.syscall_inspector.read(function(response) {
                // Используем textContent, так как бэкенд теперь присылает чистый текст
                container.textContent = response.data || "В базе данных пока нет записей.";
            }, function(error) {
                container.textContent = 'ОШИБКА AJAX: ' + (error.message || 'Неизвестная ошибка');
            });
        }
        window.onload = function() {
            $('update-btn').onclick = updateData;
            updateData();
        };
    </script>
</body>
</html>
